<?xml version="1.0" encoding="UTF-8"?>
<launch>
	<arg name="sim" default="false"/>
	<arg name="robot_ns" default=""/>

	<rosparam file="$(find sd_teleop)/config/sd_teleop.yaml" command="load"/>
	
	<node name="joy_xbox" pkg="joy" type="joy_node" if="$(arg sim)"/>
	<node name="joy_ps" pkg="joy" type="joy_node" if="$(arg sim)">
		<remap from="joy" to="joy_ps"/>
	</node>
	
	<node name="joy_convert" pkg="sd_teleop" type="joy_convert_node" if="$(arg sim)"/>

	<node name="joy_switcher" pkg="sd_teleop" type="joy_switcher_node" output="screen" if="$(arg sim)"/>

	<group ns="$(arg robot_ns)">
		<node name="joy_xbox" pkg="joy" type="joy_node" unless="$(arg sim)"/>
		<node name="joy_ps" pkg="joy" type="joy_node" unless="$(arg sim)">
			<remap from="joy" to="joy_ps"/>
		</node>

		<node name="joy_convert" pkg="sd_teleop" type="joy_convert_node" unless="$(arg sim)"/>

		<node name="teleop" pkg="sd_teleop" type="teleop_node" output="screen"/>
	</group>
</launch>
